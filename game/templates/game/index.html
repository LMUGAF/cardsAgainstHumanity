{% load staticfiles %}
<!DOCTYPE html>
<html>
	<head>
		<title>Cards Against Humanity</title>

		<link rel="stylesheet" type="text/css" href="{% static 'game/css/bootstrap.min.css' %}" />
		<style>
			#main {
				padding-top: 70px;
			}
		</style>

		<script src="{% static 'game/js/vendor/jQuery.js' %}"></script>
		<script src="{% static 'game/js/vendor/jquery.cookie.js' %}"></script>
		<script src="{% static 'game/js/vendor/underscore.js' %}"></script>
		<script src="{% static 'game/js/vendor/backbone.js' %}"></script>
		<script src="{% static 'game/js/vendor/backbone.marionette.js' %}"></script>

		<script src="{% static 'game/js/cardsAgainstHumanity.js' %}"></script>
		<script src="{% static 'game/js/AboutView.js' %}"></script>
		<script src="{% static 'game/js/Lobby.js' %}"></script>
		<script src="{% static 'game/js/Game.js' %}"></script>
		<script src="{% static 'game/js/Router.js' %}"></script>

		<script>
			$(function(){
				cardsAgainstHumanity.start();
			});
		</script>
	</head>
	<body>
		<input type="hidden" id="playerhash" name="playerhash" value="{{ playerhash }}" />
		<header class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<a href="./" class="navbar-brand">Cards against humanity</a>
				</div>

				<nav>
					<ul class="nav navbar-nav">
						<li><a href="#lobby">Lobby</a></li>
						<li><a href="#about">About</a></li>
					</ul>
				</nav>

			</div>
		</header>

		<div id="main" class="container">
		</div>

		<script type="text/template" id="template-game">
			<div class="row">
				<div class="col-xs-8">
					<div class="well" style="height: 300px;">
						<h3 class="text-center"><%= active == 0 ? "Waiting for other players to join" : "" %></h3>
					</div>
				</div>
				<div class="col-xs-4">
					<div class="well" style="height: 300px;">
						<h3 class="text-center">Players</h3>
						<ol class="js-gameplayers">
							<% for (var i = 0; i < gamePlayers.length; i++){ %>
								<li><%= gamePlayers[i].name  %></li>
							<% } %>
						</ol>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
				<div class="col-xs-2"><div class="well">some answer text</div></div>
			</div>
		</script>

		<script type="text/template" id="template-gameplayer">
			<%= $.trim(name).length == 0 ? 'Anonymous' : name %>
		</script>

		<script type="text/template" id="template-lobby">
			<div class="row">
				<div class="col-xs-8 col-xs-offset-2">
					<div class="form-horizontal js-login-form">
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-xs-8 col-xs-offset-2">
					<div class="panel panel-default">
						<div class="panel-heading">Lobby</div>
						<div class="panel-body">

							<form class="js-username-form">
								<p class="input-group">
									<input type="text" class="form-control" name="username" id="username" placeholder="Username" value="{{ playername }}" />
									<span class="input-group-btn"><button type="submit" class="btn btn-primary">Save</button></span>
								</p>
							</form>

							<div class="list-group js-lobbygames"></div>

							<button class="btn btn-primary js-newgame">New Game</button>
							<button class="btn btn-secondary js-refreshlobby">Refresh Lobby</button>

						</div>
					</div>
				</div>
			</div>
		</script>

		<script type="text/template" id="template-lobbygamelistitem">
			<a class="list-group-item" href="#game/<%= id %>">
				ID: <%= id %> |
				Players: <%= numberOfPlayers %> |
				<%
					var roundedSeconds = Math.round(secondsSinceLastPlayerJoined);
					var minutes = roundedSeconds / 60;
					var hours = minutes / 60;
					var formattedTimeString = "just now";
					if (hours > 0)
						formattedTimeString = "over an hour ago :(";
					else if (minutes > 1)
						formattedTimeString = minutes + " minutes ago";
				%>
				Last player joined <%= formattedTimeString %>
			</a>
		</script>

		<script type="text/template" id="template-about">
			<div class="row">
				<div class="col-xs-12">
					<div class="panel panel-default">
						<div class="panel-heading">About</div>
						<div class="panel-body">
							<p>
								This game is pretty much a complete rip-off of <a href="http://cardsagainsthumanity.com" target="_blank">Cards Against Humanity</a>, used under the BY-NC-SA 2.0 Creative Commons license.
							</p>
							<p>
								Card data is from <a href="https://github.com/samurailink3/hangouts-against-humanity/" target="_blank">https://github.com/samurailink3/hangouts-against-humanity/</a>.
							</p>
							<p>
								Source code available at <a href="https://github.com/ryandeba/cardsAgainstHumanity" target="_blank">https://github.com/ryandeba/cardsAgainstHumanity</a>.
							</p>
						</div>
					</div>
				</div>
			</div>
		</script>
	</body>
</html>
